name: cibuilder runner
description: run cibuilder in a standalone docker container

inputs:
  run_cmd:
    description: cibuilder command (check|build|test|deploy|all)
    required: true
  bin_url:
    description: cibuilder bin url (repo url)
    required: false
    default: ""
  bin_ref:
    description: cibuilder bin ref (branch, tag)
    required: false
    default: ""
  image:
    description: cibuilder image
    required: false
    default: docker.io/stack4ops/cibuilder:rootless

runs:
  using: composite
  steps:
    - name: Run cibuilder
      shell: bash
      run: |
        "${{ github.action_path }}/run.sh" \
          "${{ inputs.run_cmd }}" \
          "${{ inputs.bin_url }}" \
          "${{ inputs.bin_ref }}" \
          "${{ inputs.image }}"
